(function(_ds){var window=this;'use strict';var cR=function(){return(0,_ds.W)('<div class="devsite-select"></div>')},dR=function(a){var b=a.Qc,c=a.Zf;a='<label id="'+_ds.Y(a.id)+'-label" style="display:none;"'+(b?' aria-label="'+_ds.Y(b)+'"':"")+">";return(0,_ds.W)((c?a+"Select one or more options":a+"Select an option")+"</label>")},eR=function(a){var b=a.label;a=a.id;return(0,_ds.W)('<button type="button" class="devsite-select-toggle" id="'+_ds.Y(a)+'-button" aria-haspopup="true" aria-labelledby="'+_ds.Y(a)+"-label "+_ds.Y(a)+
'-button" aria-controls="'+_ds.Y(a)+'-popup">'+_ds.X(b)+"</button>")},fR=function(){return(0,_ds.W)('<span class="devsite-icon devsite-icon-arrow-drop-down devsite-select-toggle-icon" aria-hidden="true"></span>')},gR=function(a){var b=a.options,c=a.id;a=a.Zf;a='<ul class="devsite-select-list" id="'+_ds.Y(c)+'-popup" tabindex="-1" role="listbox" scrollbars aria-labelledby="'+_ds.Y(c)+'-button"'+(a?' aria-multiselectable="true"':"")+">";for(var d=b.length,f=0;f<d;f++){var g=b[f];a+='<li role="option"';
for(var k=_ds.Ns(g.attributes),l=k.length,m=0;m<l;m++){var p=k[m];a+=" "+_ds.Bp(p)+'="'+_ds.Y(g.attributes.get(p))+'"'}a+=' id="'+_ds.Y(c)+"-"+_ds.Y(f)+'" class="devsite-select-item" data-index="'+_ds.Y(f)+'"'+(g.defaultSelected?' data-selected aria-selected="true"':' aria-selected="false"')+' aria-label="'+_ds.Y(g.Qc)+'">'+_ds.X(g.label)+"</li>"}return(0,_ds.W)(a+"</ul>")},hR=function(){var a=_ds.T.call(this)||this;a.m=null;a.H=null;a.D=new _ds.Lj;a.F=new _ds.Lj;a.J=null;a.L=!1;a.o=!1;a.M="";a.h=
null;a.C=null;a.j=null;a.G=null;a.O=new _ds.Jj;return a},iR=function(a){var b=a.querySelector(".kd-select");b&&(b.classList.remove("kd-select"),Array.from(b.classList).forEach(function(c){a.classList.add(c);b.classList.remove(c)}))},nR=function(a){a.j=a.querySelector("select");var b;(b=a.j.id)||(jR++,b="devsite-select-"+jR+Math.random().toString().substr(2));a.j&&(a.j.options.length&&(a.G=a.j.options),a.j.hasAttribute("multiple")&&(a.o=!0,a.classList.add("devsite-select--multiple")));if(a.G){var c=
_ds.Wp(cR),d=a.j.options;d=d[a.j.selectedIndex]||d[0];a.M=a.hasAttribute("label")?a.getAttribute("label"):d.label;d={Qc:a.j.getAttribute("aria-label"),id:b,Zf:a.o};d=_ds.Wp(dR,d);c.appendChild(d);a.C=_ds.Wp(eR,{label:a.M,id:b});d=_ds.Wp(fR);c.appendChild(a.C);c.appendChild(d);a.h=_ds.Wp(gR,{options:Array.from(a.G).map(function(f){for(var g=f.defaultSelected,k=kR(f.label,f.defaultSelected),l=f.label,m=new Map,p=_ds.t(lR),q=p.next();!q.done;q=p.next())q=q.value,f.hasAttribute(q)&&m.set(q,f.getAttribute(q));
return{defaultSelected:g,Qc:k,label:l,attributes:m}}),id:b,Zf:a.o});c.appendChild(a.h);a.appendChild(c);a.j.hasAttribute("disabled")&&a.querySelector(".devsite-select-toggle").setAttribute("disabled","");mR(a)}a.L=!0},mR=function(a){a.D.listen(a.C,"click",function(b){clearTimeout(a.J);a.dispatchEvent(new CustomEvent("devsite-close-select",{bubbles:!0}));b.preventDefault();b.stopPropagation();a.hasAttribute("menu--open")?oR(a):pR(a)});a.D.listen(a.h,"click",function(b){b.target.classList.contains("devsite-select-item")&&
qR(a,b.target)});a.D.listen(a.h,"focusout",function(){a.J=setTimeout(function(){return oR(a)},200)});a.D.listen(a.j,"change",function(){rR(a,sR(a.querySelectorAll("option")))});a.D.listen(a.h,"keydown",function(b){var c=b.which||b.keyCode;switch(c){case 38:case 40:b.preventDefault();if(a.m){if(b=40===c?_ds.ch(a.m):_ds.dh(a.m))a.m.classList.remove("devsite-focused"),a.h.setAttribute("aria-activedescendant",b.id),b.classList.add("devsite-focused"),a.m=b}else tR(a);a.m.scrollIntoView({block:"nearest"});
break;case 13:case 32:b.preventDefault();qR(a,a.m);break;case 9:case 27:oR(a)}});a.D.listen(a.C,"keydown",function(b){var c=b.which||b.keyCode;if(38===c||40===c)b.preventDefault(),a.hasAttribute("menu--open")||pR(a)})},pR=function(a){a.setAttribute("menu--open","");a.setAttribute("aria-expanded","true");tR(a);a.h.focus();"scrollIntoViewIfNeeded"in a.m&&a.m.scrollIntoViewIfNeeded()},oR=function(a){a.removeAttribute("menu--open");a.removeAttribute("aria-expanded");a.F.listen(document.body,"click",a.H);
a.F.listen(document.body,"devsite-close-select",a.H);a.m&&a.m.classList.remove("devsite-focused")},qR=function(a,b){b&&(uR(a,parseInt(b.dataset.index,10)),a.o||(oR(a),a.C.focus()),a.j.dispatchEvent(new Event("change")))},tR=function(a){if(a.h){var b=Array.from(a.h.children).find(function(c){return c.hasAttribute("data-selected")});a.m=b?b:a.h.children[0];a.h.setAttribute("aria-activedescendant",a.m.id)}},vR=function(a){a.H=function(b){if("devsite-close-select"!==b.type||b.target!==a)a.o&&"devsite-select-item"===
b.target.className||oR(a)};a.h&&(a.F.listen(document.body,"click",a.H),a.F.listen(document.body,"devsite-close-select",a.H))},wR=function(a){if(a.h&&a.C){a.h.style.removeProperty("left");a.h.style.removeProperty("right");var b=a.h.getBoundingClientRect();0<b.x+b.width-_ds.Kj(a.O).width?a.h.style.right="0":a.h.style.left="0"}},sR=function(a){return Array.from(a).reduce(function(b,c,d){c.selected&&b.push(d);return b},[])},uR=function(a,b){var c=a.querySelectorAll("option");if(c&&c.length){if(!a.o)for(var d=
_ds.t(c),f=d.next();!f.done;f=d.next())f.value.removeAttribute("selected");c[b]&&(b=c[b],a.o&&b.hasAttribute("selected")?b.removeAttribute("selected"):b.setAttribute("selected","true"));rR(a,sR(c))}},rR=function(a,b){var c=a.querySelectorAll(".devsite-select-item");Array.from(c).forEach(function(d,f){d=!1;b.includes(f)?(d=!0,c[f].setAttribute("data-selected",""),c[f].setAttribute("aria-selected","true"),a.h.setAttribute("aria-activedescendant",c[f].id)):(c[f].removeAttribute("data-selected"),c[f].setAttribute("aria-selected",
"false"));c[f].setAttribute("aria-label",kR(c[f].textContent,d))});a.o||(a.C.textContent=a.j.options[b[0]].label);wR(a)},kR=function(a,b){return(void 0===b?0:b)?a+", selected":a},jR=0;var lR=["lang","title","value"];_ds.u(hR,_ds.T);
hR.prototype.attributeChangedCallback=function(a,b,c){var d=this;return _ds.D(function(f){if(1==f.h){if("menu--open"!==a||b===c)return f.K(2);if(!d.hasAttribute("menu--open"))return d.removeAttribute("menu--show"),_ds.Rj(d.F),f.K(2);wR(d);d.removeAttribute("menu-position");if(d.h){var g=d.h.getBoundingClientRect(),k=_ds.Kj(d.O).height,l=parseInt(_ds.Yj(d.h,"maxHeight"),10);d.setAttribute("menu-position",g.top+(d.h.scrollHeight>l?l:d.h.scrollHeight)<k?"below":"above")}vR(d);return _ds.v(f,0,4)}2!=
f.h&&d.setAttribute("menu--show","");"reset"===a&&uR(d,0);_ds.x(f)})};hR.prototype.connectedCallback=function(){this.L||(iR(this),nR(this))};hR.prototype.disconnectedCallback=function(){_ds.Rj(this.F);_ds.Rj(this.D)};_ds.n.Object.defineProperties(hR.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.j.value},set:function(a){qR(this,this.h.querySelector('.devsite-select-item[value="'+a+'"]'))}}});
_ds.n.Object.defineProperties(hR,{observedAttributes:{configurable:!0,enumerable:!0,get:function(){return["label","menu--open","reset"]}}});hR.prototype.disconnectedCallback=hR.prototype.disconnectedCallback;hR.prototype.connectedCallback=hR.prototype.connectedCallback;hR.prototype.attributeChangedCallback=hR.prototype.attributeChangedCallback;try{window.customElements.define("devsite-select",hR)}catch(a){console.warn("devsite.app.customElement.DevsiteSelect",a)};})(_ds_www);
