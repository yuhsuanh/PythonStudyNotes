(function(_ds){var window=this;'use strict';var BI=function(a){var b=a.pb;a=_ds.W;var c=b[0].imageUrl,d=b[0].servePath,f=b[0].pe,g=b[0].jg,k=b[0].Nf,l=b[0].shareTitle,m=b[0].shareDescription;b=(0,_ds.W)('<div class="devsite-badger-award"><div class="devsite-badger-award-inner"><devsite-badge-awarded badge-name="'+_ds.Y(b[0].title)+'" badge-icon-url="'+_ds.Y(_ds.Lp(c))+'"'+(d?' badge-path="'+_ds.Y(d)+'"':"")+(l?' badge-share-title="'+_ds.Y(l)+'"':"")+(m?' badge-share-description="'+_ds.Y(m)+'"':"")+(f?' next-playlist-url="'+_ds.Y(_ds.Lp(f))+
'"':"")+(g?" redeem-another":"")+(k?" hide-buttons":"")+" dismiss></devsite-badge-awarded></div></div>");return a(b)},DI=function(){var a=_ds.Js.call(this,["devsite-badge-awarded"])||this;a.o=new _ds.Lj;a.m=new _ds.ir;a.j=null;a.C=[];a.F=new _ds.Bq;a.H=-1;a.D=new _ds.Ij(function(){return void CI(a)},250);a.h=null;return a},EI=function(){return"devsite-badger"},FI=function(a){return _ds.D(function(b){if(1==b.h){if(!_ds.Gl(a.m))return b.return(!1);_ds.zl(["devsite-badge-awarded"]);return _ds.v(b,window.customElements.whenDefined("devsite-badge-awarded"),
2)}return b.return(!0)})},II=function(a){a.o.listen(document.body,"devsite-before-page-change",function(){return void GI(a)});a.o.listen(document.body,"devsite-award-granted",function(b){(b=b.Z)&&b.detail&&(a.C.push(b.detail.award),a.D.qa())});a.o.listen(document.body,["devsite-page-loaded","devsite-page-changed"],function(){HI(a);a:if(_ds.Gl(a.m)){var b=a.m.get("temp_badge");if(b){try{var c=JSON.parse(b)}catch(f){a.m.remove("temp_badge");break a}if(3>c.displayCount){a.m.set("temp_badge",JSON.stringify(c));
b=new URL(c.awardUrl,document.location.origin);var d=_ds.ui();b.origin===d.origin&&b.pathname===d.pathname&&(a.C.push(c),a.D.qa())}else a.m.remove("temp_badge")}}})},HI=function(a){var b,c,d,f;_ds.D(function(g){switch(g.h){case 1:if(a.h)return g.return(a.h.promise);a.h=new _ds.Jl;_ds.y(g,2);return _ds.v(g,FI(a),4);case 4:b=g.j;if(!b)return a.h.resolve(),g.return(a.h.promise);_ds.A(g,3);break;case 2:return _ds.B(g),a.h.resolve(),g.return(a.h.promise);case 3:return c=!1,_ds.y(g,5),_ds.v(g,a.F.hasWallet(),
7);case 7:c=g.j;_ds.A(g,6);break;case 5:_ds.B(g);case 6:return c?_ds.v(g,window.customElements.whenDefined("devsite-user"),8):(a.h.resolve(),g.return(a.h.promise));case 8:d=document.querySelector("devsite-user#devsite-user");if(!d){g.K(9);break}f=!1;_ds.y(g,10);return _ds.v(g,d.isSignedIn(),12);case 12:f=g.j;_ds.A(g,11);break;case 10:_ds.B(g);case 11:if(!f){g.K(13);break}return _ds.v(g,a.F.getProfile(),13);case 13:a.h.resolve();case 9:return g.return(a.h.promise)}})},CI=function(a){var b,c,d;return _ds.D(function(f){switch(f.h){case 1:if(a.j||
0===a.C.length||"error"===document.body.getAttribute("type")||JI.exec(document.location.pathname))return f.return();_ds.y(f,2);return _ds.v(f,window.customElements.whenDefined("devsite-badge-awarded"),4);case 4:_ds.A(f,3);break;case 2:_ds.B(f);case 3:b=a.C.splice(0,1);c=_ds.Wp(BI,{pb:b});if(!c)return f.return();a.o.listen(c,"click",function(g){(g=g.target)&&g.matches("button.dismiss")&&GI(a)});a.j=c;(d=c.querySelector("devsite-badge-awarded"))?(_ds.Pj(a.o,d,"running",function(){KI(a.j)}),document.body.appendChild(a.j)):
(document.body.appendChild(a.j),KI(a.j));_ds.x(f)}})},KI=function(a){_ds.D(function(b){a&&a.setAttribute("show","");_ds.x(b)})},GI=function(a){return _ds.D(function(b){if(1==b.h){if(!a.j)return b.return();a.m.remove("temp_badge");a.j.removeAttribute("show");return _ds.v(b,_ds.Mi(200),2)}if(3!=b.h)return _ds.Zg(a.j),a.j=null,_ds.v(b,_ds.Mi(250),3);a.D.qa();_ds.x(b)})};var JI=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/;_ds.u(DI,_ds.Js);DI.prototype.disconnectedCallback=function(){_ds.Rj(this.o);GI(this)};DI.prototype.connectedCallback=function(){var a=this;II(this);FI(this).then(function(b){b||_ds.Zg(a)}).catch(function(){_ds.Zg(a)})};DI.prototype.connectedCallback=DI.prototype.connectedCallback;DI.getTagName=EI;DI.prototype.disconnectedCallback=DI.prototype.disconnectedCallback;try{window.customElements.define(EI(),DI)}catch(a){console.warn("devsite.app.customElement.DevsiteBadger",a)};})(_ds_www);
